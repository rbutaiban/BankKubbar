<table class="w-full border-collapse mb-4">
  <thead>
    <tr>
      @for (key of getHeaderKeys(); track key) {
      <th class="p-3 text-left border-b bg-gray-50 font-semibold uppercase">
        {{ key === "_id" ? "ID" : key }}
      </th>
      }
    </tr>
  </thead>
  <tbody>
    @if (paginatedData.length > 0) { @for (item of paginatedData; track item) {
    <tr class="hover:bg-gray-100">
      @for (key of Object.keys(item); track key) {
      <td class="p-3 text-left border-b border-gray-200">
        @if (key === "type") { @if (item[key] === "deposit") {
        <div class="text-green-500">{{ item[key] }}</div>
        } @else if (item[key] === "withdraw") {
        <div class="text-red-500">{{ item[key] }}</div>
        } @else {
        {{ item[key] }}
        } } @else if (key === "amount") {
        {{ item[key] | currency : "KWD" }}
        } @else {
        {{ item[key] }}
        }
      </td>
      }
    </tr>
    } } @else {
    <tr>
      <td
        [attr.colspan]="getHeaderKeys().length || 1"
        class="text-center p-8 text-gray-500"
      >
        No data available
      </td>
    </tr>
    }
  </tbody>
</table>

@if (paginatedData.length > 0 && data.length > pageSize) {
<div class="flex items-center justify-center gap-2 mt-4">
  <button
    class="px-3 py-2 bg-white border border-gray-300 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
    [class.cursor-not-allowed]="currentPage === 1"
    [disabled]="currentPage === 1"
    (click)="previousPage()"
  >
    Previous
  </button>

  @for (page of getVisiblePageNumbers(); track page) { @if (page > 0) {
  <button
    class="px-3 py-2 bg-white border rounded transition-colors"
    [class.bg-blue-600]="page === currentPage"
    [class.text-white]="page === currentPage"
    [class.border-blue-600]="page === currentPage"
    [class.border-gray-300]="page !== currentPage"
    (click)="goToPage(page)"
  >
    {{ page }}
  </button>
  } @else {
  <span class="px-2">...</span>
  } }

  <button
    class="px-3 py-2 bg-white border border-gray-300 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
    [class.cursor-not-allowed]="currentPage === totalPages"
    [disabled]="currentPage === totalPages"
    (click)="nextPage()"
  >
    Next
  </button>

  <span class="text-sm text-gray-600 ml-2"
    >Page {{ currentPage }} of {{ totalPages }}</span
  >
</div>
}
